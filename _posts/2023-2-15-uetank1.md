---
layout: post
title: "坦克项目记录（二）"
description: ""
date: 2023-2-15
feature_image: images/2023.2.15/2.png
tags: [Unreal]
---

<!--more-->

## Customize Pixel Html

- .env.development 中的环境变量可以通过 `import.meta.env.VITE_APP_UE_PixelStream_IP_ADDRESS` 获取
- 使用 `iframe` 可以把网页嵌在网页上，`href` 可以进行地址跳转

![](../images/2023.2.15/0.png)

```Html
<a-card :style="{ width: '330px' }" title="UE 导航" hoverable>
    <template #extra>
        <a-link>
            <a :href=IP_ADDRESS>跳转 UE 流推送</a>
        </a-link>
    </template>
    <iframe :src=IP_ADDRESS> </iframe>
</a-card>
```

## Load Local Data with Cesium

- 不确定要不要用 cesium 的 gis 系统，cesium 可以帮助我进行经纬度转换，然后可以加载倾斜模型，但就是材质不是很好修改控制
- 直接生成地形贴个纹理的方案难点主要在 gis 坐标的映射，但可以考虑用插值的做法。但倾斜模型就加载不了了
- 目前我的想法还是基于 Cesium 来做，但沙地等效果还是需要基于自带的 terrain 系统来实现。以及后面需要考虑一下没有卫星贴图的区域能否去掉，现在看到的是白模

![](../images/2023.2.15/2.png)

![](../images/2023.2.15/1.png)

- 在处理 shp 文件时，需要添加空间参考系和高程图，才能很好地贴合地面

![](../images/2023.2.15/3.png)

![](../images/2023.2.15/4.png)

- 原来高程数据也可以直接用 tileset 加载，这下就可以去掉全部区域 terrain 组件了，并且这种方式倾斜摄影也更好地贴合了，很强

![](../images/2023.2.15/5.png)

- 创建一个沙漠沙地地形，修改材质并且添加天气支持

![](../images/2023.2.15/7.png)

![](../images/2023.2.15/6.png)

![](../images/2023.2.15/8.png)

- 如果 Unreal 打开就崩溃，可以试试在 DefaultEngine.ini 中修改默认地图
- Openland 的 Deform 只能支持第一块地形
- Landscape 可以给 Element 覆盖材质
- 在 Cesium 中添加水域需要用到 Polygon，并且修改 Water 材质的 Layer，Cesium 好强

![](../images/2023.2.15/9.png)

![](../images/2023.2.15/10.png)

![](../images/2023.2.15/11.png)

## Nav Spline

- 遇到打开 Rider 项目无法识别 Unreal，可以在 Tools/Refresh Project 下重新生成项目
- 犯了一个很傻的错误，我在切换控制权 Pawn，但我在 BeginPlay 的时候就在 GetPawn，这个时候新的 Pawn 还没有 Posses 上去，所以拿到的一直是空的，需要等 Posses 之后手动设置一下，找了我好久

![](../images/2023.2.15/12.png)

- 切换控制权目前我的逻辑比较简单，在 Player Controller 中，Get Player Controller，然后把旧的 Pawn 进行 Unpossess，旧的 Widget 也要清除 Remove from parent，然后生成新的 Pawn，并设置 Possess，然后就进行该 Pawn 的一些初始化和相关的设计即可

![](../images/2023.2.15/15.png)

![](../images/2023.2.15/13.png)

![](../images/2023.2.15/14.png)





## 小结

## References

- [Unreal Engine 5 - Create a desert landscape procedurally](https://www.youtube.com/watch?v=0vDnDErh_2Q)
- [Ultra Dynamic Sky - Product Video + Quick Start (UE5 Version)](https://www.youtube.com/watch?v=b52npy-XUdQ)
- [unreal+cesium关于unreal加载cesiumlab处理的白模](https://blog.csdn.net/ys_ys_y/article/details/115767732)
- [](https://www.youtube.com/watch?v=AlMPqZ2d4BQ
)
- [](https://www.youtube.com/watch?v=z7WYuOf7tWs&list=PLNTm9yU0zou4qVdpM_45RCtf6yqAhlo74
)
- [](https://www.youtube.com/watch?v=qKIJMQJsx2Y&t=80s
)
- [](https://www.youtube.com/watch?v=FVb5gQTIeYs
)
- [](https://www.youtube.com/watch?v=2g3WTR6PqZY&t=64s
)