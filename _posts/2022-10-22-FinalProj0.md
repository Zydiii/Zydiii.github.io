---
layout: post
title: "毕设记录（一）"
description: ""
date: 2022-10-22
feature_image: images/2022.10.22/0.png
tags: [毕设]
---

<!--more-->

## 系统构成

- 干扰弹：动作行为、模型材质、外观呈现 -> 可以被上级对象生成并发射 -> 间接操作对象
- 导弹 -> 间接操作对象
- 飞机 -> 用户可直接操作对象
- 环境：地形、天空、光照、云雾 

我将系统一共看成了六个部分，对象是场景中直接可见可操作的一些物体，如干扰弹、战机、环境，世界管理器管理并更新着所有对象，在启动时先从配置管理器获取场景中对象的配置初始化仿真计算器并初始化对象，然后每帧获取仿真计算器的仿真结果并赋予给场景中对象。世界管理器可以打开配置编辑器，根据配置管理器中的一些设置，提供用户可以自定义编辑配置的工具。配置管理器在系统启动时会首先查看内置配置库加载已有配置。

![](../images/2022.10.22/0.png)

## 对局流程

![](../images/2022.10.22/1.png)

## 新增配置

系统的可配置性关键在于类的抽象设计要足够通用，规定一套统一的 API 供用户续写，这里让用户编译成 dll 最方便，也可以预先设定一些行为逻辑供用户组合生成新的行为逻辑，比如运动模型，那就要把 update 接口留出来，输出是下一帧的运动状态，这样就可以继承出多种运动模型，可以实现自己的运算逻辑，输入输出定义好，初始化接口留出来，这样世界管理器只需要一开始调用一个初始化函数，之后每帧调用更新函数即可。

如果要变成分布式系统，那么现有系统也很容易扩展，因为这些管理器计算器其实不局限于所在哪台机器，它们也可以在服务器上部署，只不过还是得有一个总的调度器来管理不同对局，然后分发到不同用户上独立的管理器中。在计算时需要加上标识，说明是哪个地址的服务。同时世界管理器需要多一点同步操作。

## 开题报告

收集了一些相关的论文资料，东西比较杂乱，后续会整理。

### 刘延峰. 基于OpenGL的实时红外图像仿真引擎设计与实现[D].西安电子科技大学,2021.DOI:10.27389/d.cnki.gxadu.2021.000738.

- 传统的基于外场的红外图像获取方法和基于半实物的红外图像仿真方法往往无法快速、廉价的提供大量特定环境下的红外图像，因此基于计算机的红外仿真技术受到越来越多的关注。红外仿真技术就是通过分析实际红外成像系统的工作方式并使用计算机重现这一过程以生成满足需求的红外图像，这种方式可以有效避免利用实场获取红外图像工作量大、花费高、灵活性差等问题，具有非常大的军事与民用价值。 
- 本文以构建一个轻量易用的实时红外图像仿真引擎为目标，紧密围绕实时性这一要求，以战斗机三维模型作为主要研究对象，通过分析红外成像系统的基本物理原理，结合计算机图形学、图像处理、软件工程等领域的技术，对红外成像系统的各个关键环节进行了研究，主要工作包括：（1）研究了红外成像系统的基本物理原理，分析了影响红外成像系统的常见因素，包括独立热源、大气传输效应、太阳、遮挡、成像设备，对以上物理原理和影响因素一一建模，忽略次要因素提取主要特征，奠定本文后续提出的红外仿真数学模型的合理性和实时性。（2）通过分析仿真中各个环节的具体工作任务，对CPU和GPU进行了合理的任务分配和调度，结合OpenGL和GLSL语言构建了一套基于GPU的红外仿真系统框架。与实场拍摄的红外图像和其他红外仿真方法对比，本文的仿真图像灰度分布与实际红外图像分布基本一致，仿真速度也快于其他仿真方法。（3）针对飞机尾焰的实时红外图像仿真，提出了一种结合尾焰建模与C-G谱带法的GPU尾焰红外仿真方法。在此基础上还提出了一种基于单参数控制的尾焰网格实时更新的动态尾焰仿真方法，该方法通过控制单一参数使得尾焰模型各个顶点在GPU上独立并行的调整其空间位置以实现实时更新尾焰，从而获得尾焰扰动的逼真效果。实验结果表明，本文提出的方法可以快速、有效的仿真出飞机尾焰的红外图像。（4）针对目前国内红外图像仿真软件以及专用的红外图像仿真引擎较少的问题，依靠OpenGL与C++编程语言，结合面向对象编程思想，构造了一个轻量、专用、接口清晰、扩展性强、低耦合高内聚的红外仿真引擎。并利用此引擎二次开发了一个基于GPU的激光仿真引擎和红外仿真软件。 
- 红外成像系统具有可全天候工作、设备轻便、抗烟雾干扰能力强等特点在军事与民用领域有着广阔的应用。在军事中可以进行红外侦查、红外夜视、红外制导、红外光电对抗等。民用领域中可以进行红外测温、红外成像探伤、红外医疗等。红外图像仿真技术基于红外物理学、光学、图像处理、计算机图形学等多门学科。原理上讲红外探测器接收到目标以及背景自身或者反射的特定波段的辐射，这些辐射受到大气、成像系统等影响后传入探测器，探测器将辐射通过光电信号的转换生成最终的图像。基于数学模型的红外成像仿真技术以三维数字模型为研究对象，通过分析物体表面温度分布、红外辐射量化、成像信号转换、大气环境衰减等红外成像链路中关键步骤的物理特性并对这些过程一一建模，再利用计算机完整的模拟上述整个步骤，最后结合现代计算机中强大的硬件设备，利用计算机图形学相关领域的技术准确、快速的给出符合需求的红外图像。为了快速获取大量的红外图像，使用计算机去进行红外图像的仿真是十分必要的，而随着硬件的进步与计算机技术的发展，这种仿真方法更加快捷、先进，因此依据计算机去模拟仿真红外图像具有很大的现实意义和应用前景。
- 对飞行器等空中目标的红外仿真研究主要集中在两个方面，分别是蒙皮与尾焰。对于蒙皮来说仿真理论基础基本上都是基于热力学传播定律进行温度场求解。对于尾焰部分的仿真，大部分学者使用软件进行流体建模与红外仿真。对于基于光栅化的实时红外仿真技术来说，这种方法利用现有图形API并结合现代GPU的强大性能，快速且尽可能真实的将红外图像实时的仿真出来；而另外一种是离线红外仿真，即不考虑耗时，尽可能的考虑红外仿真精度，这种方法代表的技术有光线追踪等。但是随着硬件技术的发展与计算机图形学等学科的发展，这两种技术都有着一种融合的趋势，即在实时仿真技术中适当的使用一些离线仿真的技术以提高仿真精度，而在离线仿真中适当的使用GPU等进行加速仿真。
- 本文以战斗机模型为研究对象，考虑大气辐射、独立热源、速度、尾焰、太阳等的影响，主要做了以下几点工作：（1）结合红外辐射基本原理，考虑太阳、大气、阴影遮挡、独立热源、飞行器蒙皮效应等条件，构建了一个完整的基于OpenGL的飞机实时红外仿真框架，该框架将全部的红外计算以及后期的图像处理全部放入GPU中去进行处理，可以达到很高的仿真速率和较为理想的红外仿真结果。另外在计算温度与辐射时没有采用传统的基于三角形面片的辐射计算，而是采用了基于顶点的计算方法，可以有效地避免网格化现象。（2）提出了一种结合尾焰建模与C-G谱带法的GPU尾焰红外仿真方法。在此基础上还提出了一种基于单参数尾焰网格实时更新的动态尾焰仿真方法，该方法通过CPU控制单一参数使得尾焰模型各个顶点可以在GPU上独立并行的调整其空间位置以实现实时更新尾焰，从而获得尾焰扰动的逼真效果。（3）利用C++与OpenGL设计一款红外仿真渲染引擎，该引擎封装了本文的所有算法。本引擎具有的跨平台、扩展性强、使用简单等特点可以使得用户简单、方便的进行实际项目的开发，有效的降低了开发难度。
- 红外探测器通过接受目标和背景在特定波段下的辐射，将其量化并最终生成红外图像。在这一过程中探测器接收到的辐射会受到各种各样的影响，红外仿真就是通过分析量化各种因素对探测器接受到的辐射的影响，并计算出探测器接受到的具体辐射量。因此掌握红外辐射相关理论对研究红外仿真技术是必不可少的。
- 现实生活中，任何物体都在向外界辐射电磁波，这些电磁波在红外波段则属于红外线。对于一个有温度的物体而言，红外热成像仪接收到的红外辐射主要来自于三个方面。第一种就是最典型的自发辐射，这种辐射是由于物体具有温度从而不断地向外部辐射能量；第二种是物体表面反射的一部分外界辐射，这些辐射主要来自于太阳辐射与环境辐射的反射；第三种则是红外热成像仪本身也会接收到一部分由于大气介质效应产生的大气程辐射。这些辐射经过大气后传输到红外热成像仪中最终生成红外图像。

![](../images/2022.10.22/2.png)

（目标红外辐射特性）

- （物体自身辐射）普朗克定律->给定的温度下单位面积的黑体在单位时间和单位波长内辐射出的能量；斯蒂芬·玻尔兹曼定律->理想黑体单位面积与时间内辐射的能量与温度的四次方成正比。该公式说明了理想黑体辐射的能量只与波段与温度有关，而与其他条件如材质等无关；一般来说生活中的所有物体是达不到理想黑体的光谱辐射出度的，为了具体量化不同物体辐射能力的大小，我们用相同温度下物体辐出度与黑体辐出度之比来定义物体的红外发射率，生活中的大部分物体在一定波段范围内都不会发生变化，在计算时可以带入材料的平均发射率进行计算；维恩-位移定律->维恩-位移定律是针对绝对黑体的定律，该定律指出黑体的温度与此温度下的红外辐射最大值所对应波长的乘积为常数，维恩-位移定律指出当温度降低时，绝对黑体的红外辐射最大值对应的波长向长波方向移动，维恩-位移定律为红外探测奠定了基础。对于温度较高的物体，其辐射主要集中在短波区域，对于温度较高的物体，辐射集中在中长波波段。因此在观测某些大气层外的高速飞行目标时，一般使用短波红外探测器，因为空中目标的尾焰温度极高，其红外辐射主要集中短波部分；空中目标的尾焰、尾喷口和其他外露在外的金属喷管等部分温度都比较高，其红外辐射均集中在短波波段；蒙皮的温度比较低，所以集中在中长波波段。
- （反射辐射）理论上讲每个有温度的物体都是辐射源，这些辐射到达目标表面后会存在反射。这些反射辐射在特定的角度下会进入到红外探测器中，就会将效果叠加到最终的红外图像上。 一般的，反射可以分为漫反射与镜面反射。
- （物体零视距辐射度）

![](../images/2022.10.22/3.png)

（环境红外辐射特性）

- 红外探测器可观测的对象不仅仅只有目标，除去目标外还有环境辐射会对最终的红外图像造成影响。一般来说大部分的环境红外辐射都是可以测量的，它们的空间特性、光谱特性、时间特性均揭示了环境的固有属性。研究环境红外辐射特性可以为红外系统仿真提供物理特征和数学模型，为红外仿真提供提供理论基础。环境辐射可以来自于地物、海面、天空等。一般来说最常见的环境辐射源是来自天空的辐射，而天空辐射的主要来源是太阳辐射。
- （太阳辐射计算）直接来自于太阳，进过大气衰减后再次经过物体表面反射到达红外传感器中。这部分的计算需要结合物体表面红外吸收、反射等各种数据进行计算。来自于太阳，但是没有经过目标反射而是直接到达红外探测器。在计算时直接使用太阳常数与摄像机看向方向与太阳直射方向的夹角的余弦的积来表示。
- （大气传输模型）大气对红外辐射的影响主要在两方面，分别为衰减和叠加。导致衰减的原因是大气中的某些成分（二氧化碳、水蒸气、雾霾等）对光线产生了折射、反射，使得最终探测器接收到的光线能量下降；导致叠加的原因是红外辐射在传输过程中与其他反射、折射的红外辐射叠加。本文只考虑大气衰减效应。比尔定律

![](../images/2022.10.22/4.png)

（飞机红外特性）

- 对于正在空中飞行的飞机来说，主要影响其红外特性的为蒙皮效应和独立热源。（1）蒙皮效应：飞机在飞行时由于大气摩擦等影响会导致蒙皮温度上升，是影响飞机红外成像的一个关键因素；（2）独立热源，对于飞机来说，其尾焰会有很高的温度，这就导致其本身会向外辐射较多的热辐射；另一方面，高温尾焰还会影响蒙皮，导致越靠近热源的地方温度越高，从而影响最终的成像结果。 
- （蒙皮效应）飞机在高速飞行中与大气的摩擦也会对物体产生热量，对于飞机来说，其蒙皮温度还受到独立热源的影响，其内部热源可以抽象的简化为一个或多个点

![](../images/2022.10.22/5.png)

- （尾焰红外辐射原理）对于飞机来说，其发动机具有相当高的温度，一般可以达到上千摄氏度，是飞机等空中目标重要的辐射源。飞机发动机辐射主要包含两部分：尾喷管和尾焰部分。对于尾焰部分，目前主要计算尾焰辐射方法有热流法、有限体积法、离散坐标法、C-G谱带传输法。由于本文提出的引擎具有一定的实时性要求，因此本文采用C-G谱带传输法作为尾焰红外计算方法。

![](../images/2022.10.22/6.png)

（三维空间变换）

- 空间中的一个点最终变换到二维坐标上

![](../images/2022.10.22/7.png)

- （基于顶点的温度与辐射计算）令dQ=0，就可以解出模型的稳态温度分布。采用基于顶点的温度计算方法。其基本思想为对于每一个三角形面片，只计算该三角形三个顶点上的温度，三角形上的其他点则通过这三个顶点的温度与这个点的重心坐标求得。求出温度分布后，对于不同的波段，采用拟合辐射方程这一方法，将不同波段下的辐射方程拟合为k·T^s形式，以降低辐射量化时的运算量。
- （太阳光线可达性计算）将太阳作为相机去观察目标，然后将顶点的深度值写入深度贴图中。比较1K是否大于2K，若是，则认为该顶点太阳光线不可达，否则可达。判断一个顶点是否太阳光线可达，只需要在红外计算前获取一张太阳光线空间变换下的深度贴图。从频域的角度去理解，我们在将数据映射到图像中实质上就是一个下采样的过程，当图像分辨率较低时（即采样频率较低），由奈奎斯特采样定理可知此时会导致频谱混叠，表现在图像上即为观察到的锯齿现象。解决上述问题最直观的方法为增大采样频率，即增大最终投影图像的大小。
- （大气模型）平均大气透过率。仿真过程中再使用GPU查表法得出最终的大气衰减、大气辐射通量等参数。在仿真开始时，预先计算出不同海拔、天顶角、距离下的大气衰减参数，并将保存为纹理数据传入GPU中，每次渲染周期可以直接从纹理数据中读取大气透过率数据。这样就避免了在每次渲染的时候都需要重新计算一次大气透过率的问题。纹理的形式可以使用3通道32位浮点型纹理来保存，三个通道分别为短波、中波、长波的平均透过率，纹理的高与宽分别为探测器的天顶角与探测器的海拔高度。每次渲染时计算当前的探测器与目标的距离、探测器的海拔高度、探测器与顶点的天顶角。然后通过线性插值的方法计算出其最终的透过率。对于大气辐通量来说，采用同样的方法进行计算即可，这种方法可以较好的平衡速度与效果。
- （探测器成像模型）经过温度计算、辐射量化、大气模型计算后，热辐射到达红外探测器。经过一些光电效应变换后生成最终的红外图像。这其中主要包括两部分：光学系统模型与探测器模型。一般来说光学系统模型对成像的影响主要在两个方面，一方面是几何透视投影，另一方面是弥散效应。探测器模型主要负责灰度级的量化。这里假设探测器接受到的辐射亮度到最终像素的灰度级的量化关系为线性的。

![](../images/2022.10.22/8.png)

![](../images/2022.10.22/9.png)

- （基于GPU的实时红外仿真框架）任务初始化是为了提前计算或处理一些在整个仿真任务中都不发生改变的数据，如模型数据、场景数据、大气模型数据等，这些数据的计算通常都是比较耗时的，将这些数据提前进行处理能够保证在后续的仿真周期中快速的使用这些处理好的数据，提高仿真速度。红外仿真部分（包括温度计算、辐射量化、大阳光可达性计算、大气模型计算、探测器模型等）完全在GPU上进行处理，但是也有一小部分在CPU上进行处理（图3.15中的调整参数），比如最直观的每次渲染周期内目标与探测器在姿态与位置上都会发生该变，即每次渲染周期都要对每个顶点进行一次与上一个渲染周期不同的数学变换，但是这对每个顶点来说是相同的。
- （基于几何建模的尾焰）对于飞机尾焰来说，其形状一般不规则，但是还是需要用一个函数来描述其基本形态，通过观察可以知道，尾焰的形态类似于弓形，因此可以使用余弦函数或者二次函数来表示。在计算尾焰上的每个点的辐射时，仅仅与路径以及尾焰内部热量分布有关，因此十分适合采用GPU去进行计算，即将尾焰上的每个点独立并行的进行计算以提高效率。在计算该点具体发射的幅亮度时需要知道视线在尾焰内的具体长度和起点与终点，因此需要计算视线与尾焰的交点。然而在计算交点前，先要解决尾焰模型偏移的问题。

![](../images/2022.10.22/10.png)

- （1）最底层的模块为数据管理与数学计算模块，这一模块是整个引擎的最底层，所有模块都依赖该模块，这个模块主要负责管理基本的数据结构以及数学计算。（2）窗口模块主要负责仿真图像的显示，窗口系统的回调系统设计。（3）相机模块主要负责管理相机系统，依靠探测器的朝向、焦距、位置、扫描设置等参数计算对应的变换矩阵。（4）红外仿真模块是进行红外计算并显示的模块，这一模块依赖窗口模块、相机模块、探测器模块并调用场景管理模块。（5）资源管理模块主要负责将模型数据从磁盘读入内存中。（6）物理与特效模块主要负责物理特效的模拟，如碰撞检测等；还要进行一些特效数据生成，如粒子系统、尾焰网格数据等。（7）场景管理模块主要负责对仿真场景中的数据进行管理，该模块要依赖资源管理模块和物理与特效模块。（8）二次开发基础模块是进行二次开发的基础层。
- 针对无法快速、有效、便捷的获取大量的红外图像且国内尚没有一款专用的红外仿真引擎与软件这一问题，本文结合国内外关于红外仿真技术的已有成果，主要以数字三维模型作为研究对象，结合红外物理学、计算机图形学、图像处理等学科，利用计算机模拟红外热成像过程，从而仿真出满足需求的红外图像。（1）研究了红外成像系统的基本物理原理；在此基础上，分析了影响空中目标红外成像的关键因素，包括热源、尾焰、大气、太阳、遮挡、成像设备等；为了满足实时性红外仿真的需求，对上述因素进行合理的简化并进行建模，最终建立了红外成像链路数学模型。（2）结合OpenGL和GLSL语言构建了一套基于GPU的红外仿真系统框架。通过分析仿真中各个环节的具体工作任务，对CPU和GPU进行合理的任务分配和调度。CPU只负责两方面的工作：数据传输、参数设置等运算量较小的工作和仿真模型数据的预计算；而将比较耗时的太阳光线可达性判断、红外计算与量化、探测器效应等步骤均放入GPU中进行处理。在GPU中的计算主要分为以下几个部分，分别是阴影贴图的生成、模型红外的计算与量化、背景辐射的计算以及最终红外图像的生成，这几部分均在GPU上进行计算，具有较高的计算效率。经实验验证，本文的红外仿真系统与实拍的红外图像在模型和背景的灰度值基本吻合，仿真速率上也高于其他方法。（3）提出了一种结合尾焰建模与C-G谱带法的GPU尾焰红外仿真方法，该方法利用了建模法构建尾焰时尾焰模型表面方程确定的特点，在GPU上对尾焰和视线的求交点进行并行计算并结合C-G谱带法求出每一点的辐射亮度。此外，在建模法的基础上提出了一种基于单参数尾焰网格实时更新的动态尾焰仿真方法，通过使用CPU在每帧生成一个新的尾焰长度以生成新的约束方程，在GPU中尾焰模型的每个顶点独立地使用该约束方程更新其空间位置，以达到快速模拟尾焰不规则扰动的效果。实验结果表明，本文提出的方法可以快速、有效的仿真出飞机尾焰的红外图像。（4）结合OpenGL与C++语言构建了一个方便易用、接口清晰、扩展性强的红外仿真引擎。通过分析仿真时各部分工作性质，将引擎划分为三个层次，分别是：底层的数据管理与数学计算层，这部分包含了所有的模型管理与数学计算；中间层为引擎内部功能层，构建出了窗口类、相机类、模型类等高一级别对象，这些类独立完成其各自的功能，一定程度上降低了整个系统的耦合性，利于后期维护；最高层为抽象的探测器层，探测器层提前设置了一些构建OpenGL对象的接口，例如顶点缓冲数组对象、帧缓冲对象、大气模型纹理贴图对象、计算着色器对象等等，这避免了最终开发时调用复杂的OpenGL API，该层也是进行二次开发的基础层，在进行其他光电仿真系统的开发时继承该层可以大大降低开发难度；最后为用户层，该层灵活使用各底层内的成员函数、变量，构建红外仿真链路。（5）利用本文构建的红外仿真引擎进行二次开发，构建了一个基于GPU的激光仿真引擎和一个红外仿真软件。 
- （1）出于实时性仿真的需求，本文在计算飞机蒙皮热量分布时只考虑了稳态条件，而没有考虑温度场随时间变化这一条件。后续可以结合几何建模与热力学相关领域的内容，进行瞬态温度场的求解。（2）没有细致考虑飞机的材质信息，只考虑了飞机蒙皮的物理材质信息，然而现代飞机蒙皮经常有一层特殊的涂层，该层材料对不同波段的电磁波有不同的反射与吸收特性，后续将结合实际飞机的涂层材料针对这一点进行研究。（3）对于红外仿真系统的评价部分，目前来说还是集中在人眼主观评价上，然而这一评价准则过于主观，不具有代表性。目前国内对于红外仿真系统的评价研究也较少，下一步将研究如何具体的量化、评价一个红外仿真系统的性能。 
- 评价：这篇文章理论部分还是比较充足，红外这边主要基于黑体辐射和辐射系数来算，考虑了大气因素，没太看出来是否结合了飞机自身材质特性，提供了一种计算尾焰的方案，根据光谱来算，但没太看懂

### 张繁,王通,黄可蒙,茅佳明,黎美玲,王章野.基于Unity3D的改进实时红外仿真系统[J].计算机辅助设计与图形学学报,2018,30(07):1177-1186.

- 基于红外物理基础理论和自然场景仿真理论. 通过改进已有算法以满足红外仿真系统中的实时性和准确性2 个基本要求. 提出基于 Unity3D 的改进实时红外仿真系统. 首先探讨并修正了部分零视距离辐射计算模型和影响温度场的主要计算模型, 在计算中考虑太阳赤纬角, 改进经验公式, 提高了计算的准确性; 然后在讨论了热源放置和热传递计算问题之后. 在红外仿真中考虑物体不同材质特性对红外效果的影响. 使得绘制结果更为逼真; 最后借助 GPU 对不同场景对象多角度下的红外辐射灰度进行并行计算. 提升计算速度. 该系统基于 Unity3D 游戏引擎. 可以构建包含多种目标对象的红外场景, 如植被、建筑以及车辆; 重建的三维场景仿真效果图与实地拍摄的真实红外场景图像高度相似. 仿真实验渲染速度达到 30 帧/s, 基本满足实时性计算要求.
- 当物体温度大于绝对零度的时, 物体就会对外产生红外辐射, 即向外发射红外电磁波, 红外电磁波的波长范围介于可见光波和微波之间, 波长范围大约是 0.76~1 000 μm. 在夜间等光线较弱或者目标伪装隐蔽的条件下, 由于目标对象自身辐射红外波, 而且辐射的强度与温度成正相关, 因此利用红外波进行热成像可以提供许多可见光无法提供的信息, 红外技术在军事侦察、机械故障诊断等领域具有重要作用.红外仿真是对实际红外成像设备的成像图片进行模拟仿真, 通过物理模型对物体表面温度场进行计算, 求解出物体表面的零视距离红外辐射值; 在此基础上, 考虑多种外界条件对红外辐射值的影响, 如大气条件和设备干扰, 近一步计算出输入到接收设备的辐射值, 并将该辐射值转化为灰度值作为仿真图像的颜色值, 从而得到仿真图像.在利用实际的红外成像设备进行实地拍摄实验时,常常受到多方面的因素制约, 如不可控的环境因素、人力资源以及经济成本. 一个较为准确的红外仿真系统可以仿真出多种环境条件下的任意时段的红外场景图像, 因而, 借助红外仿真系统, 可以大大节约人力资源以及经济成本, 并且操作灵活度较高. 虽然红外仿真技术在军用和民用上用途广泛, 但是其计算复杂度较高, 仿真结果的准确性难以衡量等问题急需解决.因为地球大气对红外波段的不同子波段的透过率不同, 所以通常将红外波段分为短波红外、中波红外和长波红外 3 个区域. 红外物理成像模型包括温度场分布计算模型、大气传输计算模型以及成像过程仿真模型 3 个方面

（零视距离辐射计算模型）

- 物体表面的零视距离辐射主要包括自身辐射和反射辐射 2 个方面，（自身辐射）普朗克
定律.在求解自身辐射时, 关键是准确地求解模型的表面温度. 影响物体表面温度主要有辐射换热、对流换热和导热换热。辐射换热即高温物体通过辐射作用, 将能量传递给相对低温物体. 在自然界中, 主要的辐射是太阳对地球的辐射, 分为太阳直接辐射和大气造成的太阳散射辐射, 由于日地距离较远, 因此通常将太阳垂直辐射大气表面的辐射力视为定值, 称为太阳辐射常数。对流换热分为自然对流和受迫对流. 前者是因为温度不同导致密度差异, 从而产生压力差; 后者则是外力作用产生的对流,如风的作用。某一时间间隔内, 同一区域的物体表面温度
差异较小, 可近似认为相等. 所以对于物体表面,可以将其视为是一维稳态导热, 即只有物体表面与物体内部存在温差, 热流从物体表面流入物体内部.

![](../images/2022.10.22/11.png)

![](../images/2022.10.22/12.png)

![](../images/2022.10.22/13.png)

- （反射辐射）当周围环境的辐射到达物体表面时, 一部分辐射被吸收, 另一部分被物体表面反射, 而这反射的部分辐射同样对物体辐射成像造成影响. 自然环境中, 物体表面反射的辐射主要源自大气辐射和太阳辐射
- （热平衡方程）自然环境中, 物体通过辐射作用从外界吸收热量, 同时也向外界释放热量, 通过对流换热向空气中释放或吸收热量, 并通过导热换热与物体自身其他部分或者直接接触的外界物体释放或吸收热量

![](../images/2022.10.22/14.png)

- （红外热源仿真）没看懂这块逻辑

![](../images/2022.10.22/15.png)

![](../images/2022.10.22/16.png)

- 1) 对于自然红外场景仿真, 太阳高度等参数对计算结果的精确性影响较大. 本文通过对影响温度场的主要计算模型进行修正, 改进了前人使用的经验模拟公式, 在保证一定系统渲染帧率的基础上应用了更加精确的理论推导公式, 如太阳赤纬角的计算公式 2) 基于 Unity3D 提出新的红外仿真算法, 使得任意物体对象能够在系统中反映自身的特性,包括内在物理特性或外在关系等因素, 如内在物理材质参数和外在相对位置关系等.3) 根据场景模型表面材质属性和内部热源属性, 利用 GPU 并行加速能力快速求解受热源影响的表面温度场分布, 合理分配 CPU, GPU 的计算量,充分利用计算资源, 提高了系统的运行效率.随着虚拟现实和增强现实技术的发展, 人们对自然场景仿真提出了更高的要求. 下一步, 将结合头盔、双目眼镜等硬件设备, 将红外仿真系统拓展到虚实结合环境中, 进一步提升用户的体验

### 陈书恒,朱倪瑶,陈宁,马贤杰,刘杰.飞机红外辐射特性测试及红外干扰弹投放方式研究[J].红外技术,2021,43(10):949-953.

- 通过研究飞机的红外辐射特征，为干扰弹投放策略提供参考，采用光谱辐射计、中波热像仪、长波热像仪对飞机的静态红外辐射特性进行测试，选择迎头（ 0o）、正侧向（ 90o）、尾后（ 180o）共 3 个测试点，测试结果表明：迎头红外辐射强度和辐射面积均最小，尾后红外辐射强度最大，辐射面积较小，正侧向红外辐射面积最大，辐射强度较大。根据测试结果分析了飞机面临不同方向来袭导弹攻击时，红外干扰弹的投放使用策略。尾后攻击时，采用多点源和面源红外干扰弹；侧向攻击时，采用面源红外干扰弹；引头攻击时，采用多点源、面源红外干扰弹。
- 为保护飞机免受红外制导导弹的攻击，红外干扰弹应运而生，现今发展的红外干扰弹包括多点源红外干扰弹和面源红外干扰弹。多点源红外干扰弹依靠烟火药柱产生一个与飞机红外辐射特性类似，但能量大于飞机辐射能量 2～10 倍的热源， 以质心干扰的方式达到欺骗来袭红外制导导弹的目的；面源红外干扰弹依靠在空间形成大面积红外辐射云团，使飞机“淹没”在红外辐射云团中，以掩盖飞机自身的红外辐射特征，导致红外导引头无法分辨飞机红外辐射源和面源红外干扰弹辐射源，飞机采用机动规避的方式逃逸出导引头视场，从而免遭红外制导导弹的攻击；多点源红外干扰弹在空中形成强红外辐射源诱骗红外导引头，面红外辐射源在空中形成大面积红外辐射源掩盖飞机自身的红外辐射源，两者结合，可有效迷惑红外制导导引头，提高载机的自卫对抗能力。飞机的红外辐射特性是红外制导导弹识别、捕获、跟踪、摧毁飞机的信号来源，飞机的红外辐射信号主要由机身蒙皮、尾喷管和尾焰组成，其中尾焰和尾喷管是飞机红外辐射的主要来源，红外制导导弹从不同方向攻击飞机时，由于方向不同，导致导引头探测目标的辐射强度和辐射面积差异很大，飞机投放干扰弹的时机和种类也不同。
- ①飞机正侧向的中长波红外辐射面积比迎头和尾后都高，这是由于正侧向时，飞机最大截面与红外热像仪视场垂直，导致红外辐射面积最大；②飞机尾后的中长波红外辐射强度远远高于正侧向和迎头，尤其是中红外辐射强度达到最高说明发动机工作时，尾焰和尾喷管能显著提高飞机的红外辐射特征，但是辐射面积较小；③由于飞机机身的遮挡作用，飞机的红外辐射强度和面积均最小
- 面源红外干扰弹投放后在载机附近迅速扩散开来形成红外干扰云团，其与被保护载机的红外图像相似，或改变载机的红外图像特征，欺骗红外成像制导导弹，继而诱使红外成像制导导弹偏离被保护的载机。面源红外干扰弹对抗红外成像制导导弹，各个阶段可以采用不同的方式进行干扰目标搜索阶段，导弹距离目标通常很远，目标机形成的红外图像很小，处于点目标阶段，当面源红外干扰弹连续投放后，在真目标附近形成大面积红外辐射云团，掩盖目标的红外辐射特征，使红外成像制导导弹导引头无法锁定真目标，面源红外干扰弹起到“隐真示假”的作用。目标跟踪阶段初期，弹目距离逐渐缩短，目标形成的红外图像逐渐变大，且逐渐显示目标的外形特征，此时，红外成像制导导弹使用形心跟踪或是质心跟踪方式跟踪目标。当连续投放面源红外干扰弹后，在目标附近形成大面积红外辐射云团，其红外特征与目标相似，并与目标融合在一起形成共同的目标信息，甚至完全掩盖目标的红外辐射特征，从而改变导弹视场内的目标红外辐射特征，常用的灰度、面积、长宽比、圆度等识别特征均发生较大变化，制导系统难以识别出真目标，此时，实际目标的特征或运动参数将以不稳定或“非目标”的方式变化（如机动逃逸），而面源红外干扰弹的特征保持稳定（持续燃烧或连续投放），此时，成像导弹的识别系统将会锁定假目标，而达到干扰目的。目标跟踪阶段后期，弹目距离很近，目标在导引头视场内外形特征清楚，导引头可根据目标的外形特征（面积、长宽比、圆度等）对目标进行跟踪。此时，连续投放面源红外干扰弹后，面源红外干扰弹形成大面积红外辐射云团，与目标红外辐射特征融合，增大了整个红外辐射云团的辐射面积，改变目标的外形特征，增大导引头识别算法的运算量和识别难度，使其难以识别真目标，导致成像导引头无法通过目标的面目标特征识别出目标，从而有效降低其命中目标概率
- 点源红外干扰弹发射后形成单个热点目标，连续投放后形成多个点目标，通过质心干扰的方式诱骗红外制导导引头。由于点源红外干扰弹能量高，远大于飞机的红外辐射强度，在对抗早期第一代、第二代红外制导导引头时有效；随着具有辐射强度阈值鉴别能力的第三代、第四代红外制导导引头的装备，点源红外干扰弹由于能量太高，且干扰源数量少，干扰效能不高的缺点越来越明显。因此，点源红外干扰弹逐步被多点源红外干扰弹取代。多点源红外干扰弹发射后形成多个分散的点源红外干扰弹，连续投放后形成多个点状发热体。采用多发齐射或多方位齐射时，可迅速在一定空域形成红外高辐射区，在导引头瞬时视场内形成持续的多个干扰源，将目标信号淹没，且多点源红外干扰弹的辐射能量比点源红外干扰弹的小，略高于飞机，导引头无法通过强度阈值鉴别滤除干扰，导引头必须处理多组脉冲信号，降低了其检测目标的概率，红外导引头即使启动了抗干扰措施，但因探测器的噪声几何级数增大，而难以提取有效的制导信号，从而起到保护载机的作用
- 1）当来袭红外制导导弹从尾后攻击飞机时，开始导弹距飞机较远，飞机在红外导引头中显示为一个热点，此时采用多点源红外干扰弹，以质心干扰的方式诱骗红外导引头；随着来袭导弹与飞机距离缩短，飞机在导引头中面积逐渐增大，采用面源红外干扰弹，其红外辐射云团与飞机融合，改变目标的红外辐射特征和在导引头视角下的面目标特征，使导引头分辨不出目标，从而形成有效干扰。多点源红外干扰弹和面源红外干扰弹组合使用，两者结合可有效干扰红外导引头。2）当来袭红外制导导弹侧向攻击飞机时，由于飞机在红外导引头中显示的面积较大，且能量较高，此时可采用面源红外干扰弹有效掩盖目标的红外辐射特征，干扰来袭导弹导引头。3）当来袭红外制导导弹迎头攻击飞机时，由于此时飞机在红外导引头中显示的面积和能量均很低，此时采用多点源红外干扰弹和面源红外干扰弹组合使用，通过多点源红外干扰弹的质心干扰，形成假目标，结合面源红外干扰弹的大面积特征，掩盖目标的红外辐射特征，隐藏真实目标特征，点和面结合，达到“隐真示假”的效果，可有效干扰红外制导导弹导引头

### 潘笑天. 基于辐射度的红外场景绘制模型研究[D].浙江大学,2022.DOI:10.27461/d.cnki.gzjdx.2022.000055.

- 红外视景仿真技术指部分或完全基于物理原理，在计算机上生成与现实场景物理特征一致的红外图像。红外视景仿真技术理论上允许我们在没有实地红外图像的情况下，模拟出不同复杂场景的红外画面，从而可在军事领域用于辅助战略决策和精准战术制导。本文探索了基于物理原理的红外真实感绘制技术，主要聚焦于辐射度算法在红外仿真中的应用，包括计算物体表面热辐射传热以及环境红外漫反射光照，从而实现了一个基于有限元的针对三维红外场景的真实感绘制模型。
- 斯蒂芬玻尔兹曼定律.黑体是一个理想化的物体，实际上现实中大部分物体被近似为灰体，灰体表面的单色吸收率与入射辐射的波长无关，即吸收系数和反射系数为介于0-1之间的常数。实际物体在某温度下的吸收率与入射辐射波长的关系是不规则的，严格来说并不是灰体。但在工程上为了便于计算，常常把它们近似成灰体。

![](../images/2022.10.22/17.png)

![](../images/2022.10.22/18.png)

- 当有温度差存在时，热量会从高温处传递到低温处，这种由于温度差引起的能量转移现象被称为传热。在传热学中，热量的传递有对流、导热和热辐射三种基本形式。对流传热指相互接触的流体和固体壁面之间的热量传递过程，要综合考虑宏观的热对流与微观的热传导，对流的热通量的计算较为复杂，本论文采用了如下经验公式计算对流热通量

![](../images/2022.10.22/19.png)

- 在计算传热时将场景模型简化为有厚度的三维平面，地面视为无限厚度的平面。本文将平面根据厚度分层，认为其由 N 层材料组成，每一层之间都有一定的厚度，将最后一层（第N层）视为绝热的，不会再继续传导。对于无限厚度的地面，本文将其第N层视为无穷厚度，且第N层的温度是固定的

![](../images/2022.10.22/20.png)

- 物体向外发射的热辐射在遇到其他物体时会被部分吸收并转化为热能，同时物体也会吸收来自其他物体的热辐射并转化成热能，这个过程称为热辐射传热。
- 经典辐射度线性方程

![](../images/2022.10.22/21.png)

- 依据辐射度算法的基本原理，我们需要做这几件事： 首先对网格做细分。计算面片之间的可见性与形状因子。迭代计算出射辐射度。最后一轮迭代后，我们可以得到每个面片的入射辐射度，此时根据应用场景的不同计算出两类结果： 计算热辐射时：根据面片吸收率计算被吸收的热辐射，并得到其转化的热能。计算场景红外全局光照时：计算面片的辐射亮度并显示。
- （网格细分）针对每个面片𝑃𝑖 ，我们在计算过程中涉及以下几个变量： 面片𝑃𝑖 的世界坐标𝑝𝑖 与法线方向𝑛𝑖 ，用于计算𝑃𝑖 法向的半球空间。面片𝑃𝑖 的自辐射，其接收到的来自场景其他面片的入射辐射度，以及面片𝑃𝑖 处物体的反射率，用于计算出射辐射度。出射辐射度需要被存储下来，作为下一轮迭代的输入参数，最后一轮迭代存储的出射辐射度作为计算结果用于之后的绘制。上述变量中，自辐射就是面片在初始状态下的出射辐射度，是不需要额外存储的，入射辐射度就是上一轮迭代计算得到的出射辐射度，因此也不需要额外存储。因此对于场景中每一个网格，我们仅需要构造三个纹理贴图：坐标贴图，法线贴图，出射辐射度贴图。
- （可见性与形状因子计算）没太理解。为了计算形状因子，我们从面片 𝑃𝑖 的位置与法向方向对场景作光栅化，我们需要得到每个面片含有的片元数量我们使用纹理的单个像素来代表单个面片，因此对于面片的每一个需要存储的数据，我们都使用纹理来存储，这里我们同样使用了一张单通道的整型纹理贴图来存储每个面片所包含的片元数量。在片元着色器中，我们根据当前片元的uv值，将贴图中对应位置的值加1。这样当所有片元完成计算后，贴图中每一个位置的数值就代表了对应面片的片元数𝑁𝑗。
- （平行光的绘制）对于每一个被平行光𝑁照射到的面片𝑃，根据其世界坐标与法向，由以下公式计算得到该面片接收到的来自平行光源𝑁的入射辐射亮度𝐿。计算结果被保存在光照贴图中，这一步得到的光照贴图作为后续辐射度计算时第一轮迭代的输入数据。

![](../images/2022.10.22/22.png)

- （辐射度模型整体架构）

![](../images/2022.10.22/23.png)

- （红外辐射特性分析及计算流程）










## 小结




## References

- [Building a Scalable AAA Game Engine (Presented by Amazon Lumberyard)](https://gdcvault.com/play/1024276/Building-a-Scalable-AAA-Game)